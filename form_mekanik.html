<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Form Rekruitmen Mekanik STM</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

body {
    margin:0; padding:0;
    font-family:'Poppins',sans-serif;
    background:#121212;
    display:flex; justify-content:center; align-items:center;
    min-height:100vh;
    color:#fff;
}

/* Notifikasi Modern Klikable */
#notification {
    position: fixed;
    top:20px;
    left:50%;
    transform: translateX(-50%) translateY(-120%);
    background: #1e1e1e;
    padding:12px 20px;
    border-radius:12px;
    box-shadow:0 5px 20px rgba(0,0,0,0.6);
    font-weight:600;
    color:#ffa500;
    z-index:9999;
    transition: transform 0.5s ease, opacity 0.5s ease;
    opacity:0;
    text-decoration:none;
    cursor:pointer;
    max-width:350px;
    width:90%;
    text-align:center;
}

#notification.show {
    transform: translateX(-50%) translateY(0);
    opacity:1;
}

/* Form container */
.form-container {
    background:#1e1e1e;
    padding:20px;
    border-radius:15px;
    max-width:400px;
    width:90%;
    box-shadow:0 5px 20px rgba(0,0,0,0.6);
    text-align:center;
}

.form-container img.logo {
    width:100px;
    height:auto;
    margin-bottom:15px;
    border-radius:50%;
    box-shadow:0 0 15px rgba(255,255,255,0.3);
}

.form-container h2 {
    margin-bottom:15px;
    color:#ffa500;
}

.form-container form {
    display:flex;
    flex-direction:column;
    gap:12px;
}

.form-container input, 
.form-container textarea, 
.form-container select {
    padding:10px;
    border-radius:8px;
    border:1px solid #333;
    background:#2c2c2c;
    color:#fff;
    font-size:1rem;
}

.form-container input[type="number"] {
    -moz-appearance:textfield;
}

.form-container input[type="file"] {
    padding:5px;
    background:#2c2c2c;
}

.form-container textarea {
    resize:vertical;
    color:#fff;
}

.form-container button {
    margin-top:10px;
    padding:12px;
    border:none;
    border-radius:10px;
    background:#ffa500;
    color:#121212;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
}

.form-container button:hover {
    background:#ffb732;
}
</style>
</head>
<body>

<a id="notification" target="_blank"></a>

<div class="form-container">
    <img src="https://i.imgur.com/5YYezT6.png" alt="Logo STM" class="logo">
    <h2>üõ†Ô∏è Form Rekruitmen Mekanik STM üõ†Ô∏è</h2>
    <form id="mekanikForm">
        <input type="text" name="nama_ic" placeholder="üë§ NAMA IC" required>
        <input type="text" name="nama_discord" placeholder="üí¨ NAMA DISCORD" required>
        <input type="number" name="level_ic" placeholder="üéöÔ∏è LEVEL IC" required>
        <input type="number" name="v" placeholder="üöÄ INGIN BERGABUNG KE V?" required>
        <textarea name="alasan" placeholder="üìù ALASAN BERGABUNG KE STM" required></textarea>
        <input type="file" name="ss_stats" accept="image/*" required>
        <textarea name="note" placeholder="üõë NOTE" readonly>Catatan:Jika Di workhsop Tersebut Selanjutnya Lakukan Interview</textarea>
        <button type="submit">üì® Kirim Lamaran</button>
    </form>
</div>

<script>
const form = document.getElementById('mekanikForm');
const notification = document.getElementById('notification');
const webhookURL = 'https://discord.com/api/webhooks/1435819630773014688/Hv7X5V8AZaw3hHwer4c-oXJ3h6ntBzpzbK_pcI1OGGbNi_-_k30YgCPClhjRJYb_9SB5';
const announcementChannel = 'https://discord.com/channels/1093708924391264327/1365559689273937950';

function showNotification(message, success=true){
    notification.textContent = message;
    notification.href = announcementChannel;
    notification.style.background = success ? '#1e1e1e' : '#440000';
    notification.style.color = success ? '#ffa500' : '#ff6666';
    notification.classList.add('show');
    setTimeout(()=>notification.classList.remove('show'), 6000);
}

form.addEventListener('submit', async e => {
    e.preventDefault();
    const data = new FormData(form);

    // Embed Discord dengan emoji
    const embed = {
        title: "üõ†Ô∏è Lamaran Mekanik STM",
        color: 16753920,
        fields: [
            { name: "üë§ NAMA IC", value: data.get('nama_ic'), inline: true },
            { name: "üí¨ NAMA DISCORD", value: data.get('nama_discord'), inline: true },
            { name: "üéöÔ∏è LEVEL IC", value: data.get('level_ic'), inline: true },
            { name: "üöÄ V", value: data.get('v'), inline: true },
            { name: "üìù ALASAN", value: data.get('alasan') }
        ],
        timestamp: new Date().toISOString()
    };

    const file = data.get('ss_stats');
    const formData = new FormData();
    formData.append('file', file);
    formData.append('payload_json', JSON.stringify({embeds:[embed]}));

    try {
        const res = await fetch(webhookURL, {method:'POST', body:formData});
        if(res.ok){
            showNotification('‚úÖ Lamaran terkirim! Klik untuk ke Channel Announcement.', true);
            form.reset();
        } else {
            showNotification('‚ùå Gagal mengirim lamaran, coba lagi.', false);
        }
    } catch(err){
        showNotification('‚ö†Ô∏è Terjadi error: ' + err.message, false);
    }
});
</script>

</body>
</html>
